# 外呼通知

## URL

```
POST /account/{account_id}/call/notify_call
```

## 参数

- `from` 主叫号码
- `to` 被叫号码
- `files` 通知放音文件(列表)
- `repeat` 重复播放次数
- `max_dial_duration` 最大拨号等待时间（秒）
- `callback_url` 结果通知地址
- `callback_method` 结果通知 HTTP 方法, `GET`(默认) or `POST`
- `user_data` 用户数据

| 参数               | 必须  | 说明                                  |
| ----------------- | ----- | ----------------------------------- |
| from              | 否    | 主叫号码，只能填租用的号码，不填平台会自动选择一个可用的        |
| to                | 是    | 被叫号码                                |
| max_dial_duration | 否    | 最大拨号等待时间（秒），默认50秒                   |
| repeat            | 否    | 重复播放次数，默认1，表示播放两次。注意，0表示播放一次，不重复。
| play_file         | 否    | 提示音文件，文件名或者文件名列表，文件名为开发者用户中心的放音文件名       |
| play_content      | 否    | 动态播放内容，可以是数字、日期、金额       |
| user_data         | 否    | 用户数据,最大128个字符                       |

参数 `play_file` 与 `play_content` 不得同时为空。
两者都被赋值的情况下，首先播放 `play_file` 指定的文件，然后才播放 `play_content` 中的内容。

`play_content` 是一个 JSON 数组，数组的元素（最多10个元素）是一个三元数组，这3个元素的含义是:

| 序号 |  说明  |
| ---- | ------ |
| 0    | 放音内容(字符串) |
| 1    | 放音类型枚举值（整形） |
| 2    | 放音选项字符串 |

其中，放音选项字符串目前没有作用，一律填写空字符串。

放音类型枚举值定义如下:


| 枚举值 |  说明 |
| ----- | ----- |
| `0`   | 文件播放。此时，放音内容应是文件名字符串。 |
| `1`   | 数字播放。此时，放音内容应是十进制整数。 |
| `2`   | 数值播放。此时，放音内容应是十进制整数或者浮点数。 |
| `3`   | 金额播放。此时，放音内容应是十进制整数或者浮点数。 |
| `4`   | 日期时间播放。格式是 `"YYYY-mm-DD"` 或者 `"HH:MM:SS"` 或者 `"YYYY-mm-DD HH:MM:SS"` |
| `5`   | 时长播放。此时，放音内容是文件名字符串。 |
| `6`   | 金额播放（元角分）。此时，放音内容应是十进制整数或者浮点数。 |
| ----- | -------------------------------------------------------------------- |


## 回复

- `id`

## 事件

见 [外呼通知事件](../evt/simple_call/notify_call.md)

#### 示例
```json
{
  "from": "400-12349789",
  "to": "13692206627",
  "max_dial_duration": 60,
  "repeat": 1,
  "play_file": ["你好.wav", "你的余额是.wav"],
  "play_content": [
    ["3245.24", 6, ""],
    ["有效期到.wav", 0, ""],
    ["2020-05-09", 4, ""],
    ["bye.wav", 0, ""]
  ],
  "user_data": "your data"
}
```

## 响应
- `code` 错误码， 000000表示正常
- `msg` 错误信息
- `data.callId` 呼叫id

#### 示例
```json
{
  "code": "000000",
  "msg": "请求成功",
  "data": {
    "callId": "89d716b2fc23ebff7a0086482bda8942"
  }
}
```
