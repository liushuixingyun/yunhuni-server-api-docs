# 双向回拨
调用该接口后， [yunhuni.com](http://yunhuni.com/) 首先向第一个被叫方发起呼叫；
在第一方接听后，向二方放发起呼叫；第二方接听后，双方通话。

期间任何一方挂机，就结束双向回拨过程。

被叫的双方不能是同一个号码。

## URL

```
POST /account/{account_id}/call/duo_callback
```

## 参数列表

|          参数        |       有效值范围          |      默认值         |         说明          |
| -------------------- | ------------------------ | ------------------- | -------------------- |
| `from1`              | 电话号码字符串            | `null`: 使用系统主叫 | 向第一方显示的来电号码 |
| `to1`                | 电话号码字符串            |                     | 第一方的被叫号码      |
| `from2`              | 电话号码字符串            | `null`: 使用系统主叫 | 向第二方显示的来电号码 |
| `to2`                | 电话号码字符串            |                     | 第二方的被叫号码      |
| `ring_tone`          | 录音文件名字符串          | `null`: 无自定义回铃音 | 自定义回铃音文件，再向第二方拨号的时候，向第一方播放这个文件。如果不指定该参数或者该参数为空，则向第一方透传播放第二方的回铃音 |
| `ring_tone_mode`     | 枚举                     | `3`                 | 自定义回铃音播放模式，见参数详解 |
| `max_dial_duration`  | 正整数                   | `45`                | 最大拨号等待时长（秒）。系统再拨号进行该时长后，仍然没有被接听，则中断拨号过程，做超时错误处理 |
| `max_call_duration`  | 正整数                   |                     | 最大通话时长（秒）。双方通话的最大时长。超过该时长，系统将挂断。 |
| `recording`          | 尚未实现，**不要使用** | `false`: 不录音 | 是否录音 |
| `record_mode`        | 尚未实现，**不要使用** | `0` | 录音模式： |
| `countdown_time`     | 尚未实现，**不要使用** | | 倒计时时间点 |
| `countdown_voice`    | 尚未实现，**不要使用** | | 倒计时播放语音文件 |
| `user_data`          | 字符串 | `null`: 无用户数据 | 用户数据，该呼叫的后续事件将带有该参数 |

## 参数详解

### 回铃音播放模式
`ring_tone_mode` 枚举：

枚举值 | 说明
----- | -------------------------------------------------------
`0`   | 收到对端回铃后开始播放。如果回铃音文件为空，则不播放，直接拨号，且透传回铃音。
`1`   | 拨号时即开始播放，收到对端回铃后停止播放，并透传回铃音。如果回铃音文件为空，则不播放，直接拨号，且透传回铃音。
`2`   | 拨号时即开始播放，对端接听或者挂机后停止播放。如果回铃音文件为空，则不播放，直接拨号，且透传回铃音。
`3`   | 拨号之前播放回铃音文件，播放完毕后再拨号，拨号时透传对方的回铃音。如果回铃音文件为空，则不播放，直接拨号，且透传回铃音。

## 回复

返回结果的属性列表

属性       |   有效值范围   |                   说明                                
--------- | -------------- | -------------------------------------
`id`      | UUID HEX 字符串      | 此次双向回拨的 ID                                      

## 事件

见 [双向回拨事件](../evt/simple_call/duo_callback.md)一节

## 举例

请求:
```http
POST {BASE_URL}/account/{account_id}/call/duo_callback HTTP/1.1
Host: api.yunhuni.com
Content-Type: application/json
Accept-Type: application/json
Content-Length: xxx

{
  "from1": "075589877675",
  "from2": "075589877675",
  "to1": "13967446745",
  "to2": "13009347583",
  "max_call_duration": 3600
}
```

回复:
```http
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: xxx

{
  "id": "2e2597d4-8492-11e6-81c7-803f5d09b29d"
}
```
