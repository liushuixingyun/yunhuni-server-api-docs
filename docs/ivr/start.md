# IVR呼入回调
<!-- toc -->

该接口由开发者实现，壹耘服务器在监听到ivr呼入事件时，将通过该接口询问开发者是否接听该呼入。
开发者可根据呼入号码进行判断，比如是否属于黑名单，然后告诉平台是否接听。

##回调URL
    
```
POST ${NOTIFY_URL}?from={mobile}
```

### 参数列表
| 参数                  | 有效值范围       |  说明                                   |
| --------------------- | ---------------- | --------------------------------------- |
| `action`              | `"ivr_start"`    | 事件标志：ivr_start                     |
| `type`              | `"ivr_call"`或者`"ivr_incoming"`    | ivr类型，ivr_call代表是平台呼给用户，ivr_incoming表示用户呼入                    |
| `call_id`             | `UUID`           | 呼叫id                                   |
| `subaccount_id`       | `UUID`           | 子账号id，事件所属子账号，如果为空表示是主账号的事件|
| `from`                | 号码字符串        | 用户号码                                |
| `user_data`                | 字符串最多128个字符        | 用户数据                                |

##响应

当收到IVR呼入回调之后，
如果用户应用服务程序回复 IVR [挂断(`<hangup>`)](./action/hangup.md)，平台将直接拒接该来电；
如果用户应用服务程序回复其它 IVR，平台将接听该来电，并在接听成功之后，执行此 IVR 动作；
如果平台收不到 IVR 回应，该呼入将得不到响应，直到超时。
