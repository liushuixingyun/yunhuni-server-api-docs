# 坐席操作接口
<!-- toc -->

## 接受排队任务

```
POST {BASE_URL}/callcenter/agent/accept
```

参数                   | 有效值范围            | 必填 | 说明
---------------------- | ----------------------| ---- | ----------------------------------------
`id`                   | 字符/数字字符串       | √    | 坐席的名称
`queueId`              |                       |      | 

## 拒绝排队任务

```
POST {BASE_URL}/callcenter/agent/reject
```

参数                   | 有效值范围            | 必填 | 说明
---------------------- | ----------------------| ---- | ----------------------------------------
`id`                   | 字符/数字字符串       | √    | 坐席的名称
`queueId`              |                       |      | 

## 退出交谈
坐席退出`conversation`

```
POST {BASE_URL}/callcenter/agent/exit
```

参数                   | 有效值范围            | 必填 | 说明
---------------------- | ----------------------| ---- | ----------------------------------------
`id`                   | 字符/数字字符串       | √    | 坐席的名称
`conversationId`       |                       |      | 


## 加入交谈
坐席加入`conversation`

```
POST {BASE_URL}/callcenter/agent/enter
```

参数                   | 有效值范围            | 必填 | 说明
---------------------- | ----------------------| ---- | ----------------------------------------
`id`                   | 字符/数字字符串       | √    | 坐席的名称
`conversationId`       |                       |      |
`mode`                 | Integer               |      | 录放音模式

`mode`:

值     | 说明
------ | ---------
`1`    | 放音+收音
`2`    | 收音
`3`    | 放音
`4`    | 无

> - 如果坐席的分机没有被连接，应首先连接其分机
> - 如果在其它 `conversation` 中，调用后会离开原来的`conversation`，相当于先调用保持。

## 呼出

```
POST {BASE_URL}/callcenter/agent/outercall
```

参数                   | 有效值范围            | 必填 | 说明
---------------------- | ----------------------| ---- | ----------------------------------------
`id`                   | 字符/数字字符串       | √    | 坐席的名称
`to`                   | 电话号码              | √    | 被叫号码
`from`                 | 电话号码              |      | 主叫号码
`max_dial_seconds`     | 正整数                |      | 最大拨号等待时间
`max_answer_seconds`   | 正整数                | √    | 最大通话时间

## 呼叫其它坐席
```
POST {BASE_URL}/callcenter/agent/innercall
```

参数                   | 有效值范围            | 必填 | 说明
---------------------- | ----------------------| ---- | ----------------------------------------
`id`                   | 字符/数字字符串       | √    | 坐席的名称
`enqueue`              | XML 字符串            | √    | 目标坐席选择条件（同排队）

## 前转
即`forward`——在排队任务到达坐席之后，接受任务之前，将当前服务对象的话路转移到别的坐席。

这实际上是重新排队！

```
POST {BASE_URL}/callcenter/agent/fwd
```

参数                   | 有效值范围            | 必填 | 说明
---------------------- | ----------------------| ---- | ----------------------------------------
`id`                   | 字符/数字字符串       | √    | 坐席的名称
`enqueue`              | XML 字符串            | √    | 目标坐席选择条件（同排队）

## 后转
即`transfer`——通话期间，将当前的会话转移到别的坐席。

这实际上是重新排队 + 坐席加入对话

仅适用于一对一对话。

```
POST {BASE_URL}/callcenter/agent/xfer
```

参数                   | 有效值范围            | 必填 | 默认值     | 说明
---------------------- | ----------------------| ---- | ---------- | -----------------------------
`id`                   | 字符/数字字符串       | √    |            | 坐席的名称
`queue`                | XML 字符串            | √    |            | 目标坐席选择条件（同排队）
`mode`                 | Integer               | √    | `0`        | 该坐席是否在执行转移时的退出模式

退出模式:

0. 调用后退出，无论转接是否成功
1. 不退出，而是和被转接对象一起形成3方通话
2. 排队成功后（找到被转接对象后）退出
3. 被转接连接成功后退出

## 保持
此时，坐席在 `conversation` 的会议资源中处于“不听不说状态”。
如果此时`conversation`只剩下客户，可播放放音文件。

```
POST {BASE_URL}/callcenter/agent/hold
```

参数                   | 有效值范围            | 必填 | 默认值     | 说明
---------------------- | ----------------------| ---- | ---------- | -----------------------------
`id`                   | 字符/数字字符串       | √    |            | 坐席的名称
`conversationId`       |                       |      |            |
`palyContent`          | 文件名                |      | `""`       | 对于 one-to-one conversation，坐席保持时可播放此文件
