# 交谈事件

<!-- toc -->

## 交谈状态变化

参数                      | 有效值范围                                | 说明
----------------------    | ----------------------------------------- | ----------------------------------------
`event`                   | **callcenter.conversation.state_changed** | 据此字段识别不同事件
`id`                      | ID                                        | 交谈 ID
`type`                    | ID                                        | 交谈的产生类型
`previous_state`          | 字符串                                    | 上次状态（变化之前的状态）
`latest_state`            | 字符串                                    | 最新状态（变化之后的状态）
`queue_id`                | ID                                        | 如果交谈由排队产生，该属性记录排队的ID；否则为空
`channel_id`              | ID                                        | 如果交谈由排队产生，该属性记录排队的通道ID；否则为空
`begin_time`              | 时间戳                                    | 排队开始时间
`end_time`                | 时间戳                                    | 整个交谈过程的结束时间
`end_reason`              | 字符串                                    | 结束原因
`agent_call_id`           | ID                                        | 如果交谈由坐席外呼产生，该属性坐席呼叫的ID；否则为空

### `type`

值                    | 说明
--------------------- | --------------
`queue`               | 排队产生
`call_out`            | 坐席外呼产生
`call_agent`          | 坐席呼叫其它坐席产生

### 状态
有：

值              | 说明
--------------- | --------------
`running`       | 正在进行（交谈建立时，事件的`type`参数是这个值）
`completed`     | 已经结束（交谈解散时，事件的`type`参数是这个值）

## 交谈中参与者发生变化

参数                      | 有效值范围                                | 说明
----------------------    | ----------------------------------------- | ----------------------------------------
`event`                   | **callcenter.conversation.parts_changed** | 据此字段识别不同事件
`id`                      | ID                                        | 交谈 ID

开发者需要调用 [获取交谈单条记录](../conversation.md#获取交谈单条记录) 接口获得参与者列表。
